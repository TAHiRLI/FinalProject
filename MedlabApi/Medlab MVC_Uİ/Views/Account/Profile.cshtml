@{
    ViewData["Title"] = "Profile";
}
@model ProfileViewModel
<!-- Bread crumb -->
<div class="breadCrumb p-3 bg-light">
    <p class="container mb-0 px-5">
        <a asp-action="index" asp-controller="home">Home</a>/<a href="#">Profile</a>
    </p>
</div>

<main class="position-relative">
    <section id="User-profile_Section" class="">
        <div class="user-greeting  position-relative">
            <p class="h1 text-center text-light fs-1">Hi, Tahir Tahirli</p>
            <div class="user-greeting_user-photo position-absolute">
                <img src="~/Assets/Uploads/Users/DEFAULT-USER.jpg" alt="" class="" />
            </div>
        </div>
        <div class="container py-5">
            <div class="mt-md-5 row ">
                <div class="tab-buttons bg-light d-flex nav flex-row flex-sm-column col-lg-2 col-3 p-0  align-items-center justify-content-sm-start justify-content-evenly">
                    @if (!User.IsInRole("Doctor"))
                    {
                        <button class="tab-btn active"
                            id="account-tab"
                            data-bs-toggle="tab"
                            data-bs-target="#tab-account"
                            type="button"
                            role="tab"
                            aria-controls="tab-account"
                            aria-selected="true">
                            <i class="fa-solid fa-user"></i>
                            <span class="d-none d-sm-inline"> Account</span>
                        </button>

                    }
                    else if (User.IsInRole("Doctor"))
                    {
                        <button class="tab-btn active"
                            id="blogs-tab"
                            data-bs-toggle="tab"
                            data-bs-target="#tab-blogs"
                            type="button"
                            role="tab"
                            aria-controls="tab-blogs"
                            aria-selected="true">
                            <i class="fa-solid fa-video"></i>
                            <span class="d-none d-sm-inline"> My Blogs</span>
                        </button>

                    }



                    <button class="tab-btn"
                            id="order-tab"
                            data-bs-toggle="tab"
                            data-bs-target="#tab-order"
                            type="button"
                            role="tab"
                            aria-controls="tab-order"
                            aria-selected="false">
                        <i class="fa-solid fa-box"></i>
                        <span class="d-none d-sm-inline"> Orders</span>
                    </button>

                    <button class="tab-btn"
                            id="exam-tab"
                            data-bs-toggle="tab"
                            data-bs-target="#tab-exam"
                            type="button"
                            role="tab"
                            aria-controls="tab-exam"
                            aria-selected="false">
                        <i class="fa-solid fa-file-waveform"></i>
                        <span class="d-none d-sm-inline"> Medical Examinations</span>
                    </button>



                    <button class="tab-btn"
                            id="appointment-tab"
                            data-bs-toggle="tab"
                            data-bs-target="#tab-appointment"
                            type="button"
                            role="tab"
                            aria-controls="tab-appointment"
                            aria-selected="false">
                        <i class="fa-solid fa-video"></i>
                        <span class="d-none d-sm-inline"> Appointments</span>
                    </button>



                    <a asp-action="logout" asp-controller="account" class="tab-btn btn">
                        <i class="fa-solid fa-right-from-bracket"></i>
                        <span class="d-none d-sm-inline"> Log Out</span>
                    </a>
                </div>

                <div class="tab-content p-2 border-gray col-lg-10 col-12 col-sm-9">
                    @if (!User.IsInRole("Doctor"))
                    {
                        <!--Profile tab -->
                        @await Html.PartialAsync("_AccountProfileTabPartial",Model.EditProfileViewModel)
                    }
                    @if (User.IsInRole("Doctor"))
                    {
                        <!-- Blogs tab  -->
                        <div class="tab-pane bg-light p-2 tab-content-blogs fade show active "
                         id="tab-blogs"
                         role="tabpanel"
                         aria-labelledby="blogs-tab"
                         tabindex="0">
                            <div class="container">
                                <div class="w-100 d-flex justify-content-end">
                                    <a asp-action="create" asp-controller="blog" class="my-custom-btn btn py-1">
                                        Add New Blog
                                    </a>
                                </div>
                                <div class="cart-products">
                                    @foreach (var blog in Model.Doctor.Blogs)
                                    {
                                        <!-- Item -->
                                        <div class="cart-product_item bgi my-3 p-2  row position-relative">
                                            <div class="cart-product_item_photo d-flex align-items-center justify-content-center col-md-2 mb-3 mb-md-0 p-0">
                                                <img src="~/Assets/Uploads/Blogs/@blog.ImageUrl"
                                             alt=""
                                             class="" />
                                            </div>
                                            <div class="cart-product_item_info col-md-10">
                                                <h3 class="cart-product-title fw-semibold h5">
                                                    <a asp-action="details" asp-controller="blog" asp-route-id="@blog.Id" class="link-base text-decoration-none">
                                                        @blog.Title
                                                    </a>
                                                </h3>
                                                <p class="mb-0">@blog.PrevText</p>
                                            </div>
                                            <a asp-action="edit" asp-controller="Blog" asp-route-id="@blog.Id" class="my-custom-btn m-1 px-2 py-1 position-absolute position-top-right">
                                                <i class="fas fa-pencil"></i>
                                            </a>
                                        </div>

                                    }

                                    <!-- End -->
                                </div>
                            </div>
                        </div>
                    }
                    <!-- Orders tab  -->
                    <div class="tab-pane bg-light p-2 tab-content-orders fade "
                         id="tab-order"
                         role="tabpanel"
                         aria-labelledby="order-tab"
                         tabindex="0">
                        <div class="container">
                            <div class="cart-products">
                                <!-- Item -->
                                <div class="cart-product_item bgi my-3 p-2  row position-relative">
                                    <div class="cart-product_item_photo d-flex align-items-center justify-content-center col-md-2 mb-3 mb-md-0 p-0">
                                        <img src="~/Assets/Uploads/Products/prd-4.jpg"
                                             alt=""
                                             class="" />
                                    </div>
                                    <div class="cart-product_item_info col-md-10">
                                        <h3 class="cart-product-title fw-semibold h5">
                                            <a href="" class="link-base text-decoration-none">
                                                Activated Charcoal Teeth Whitening Toothpaste MINT
                                                Flavor
                                            </a>

                                        </h3>
                                        <p class="text-decoration-line-through m-0">$112.2</p>
                                        <p class="my-1 cart-product-price text-base">
                                            $68.5 / 4
                                        </p>
                                        <p class="mb-0">17.05.2022</p>
                                        <p class="mb-0">Azerbaijan , baku</p>
                                        <p class="mb-0">Suraxanı Nizami 12b</p>
                                        <p class="mb-0">Aze4115</p>
                                    </div>
                                </div>
                                <!-- Item -->
                                <div class="cart-product_item my-3 p-2 row position-relative">
                                    <div class="cart-product_item_photo d-flex align-items-center justify-content-center col-md-2 mb-3 mb-md-0 p-0">
                                        <img src="~/Assets/Uploads/Products/prd-4.jpg"
                                             alt=""
                                             class="" />
                                    </div>
                                    <div class="cart-product_item_info col-md-10">
                                        <h3 class="cart-product-title fw-semibold h5">
                                            <a href="" class="link-base text-decoration-none">
                                                Activated Charcoal Teeth Whitening Toothpaste MINT
                                                Flavor
                                            </a>

                                        </h3>
                                        <p class="text-decoration-line-through m-0">$112.2</p>
                                        <p class="my-1 cart-product-price text-base">
                                            $68.5 / 4
                                        </p>
                                        <p class="mb-0">17.05.2022</p>
                                        <p class="mb-0">Azerbaijan , baku</p>
                                        <p class="mb-0">Suraxanı Nizami 12b</p>
                                        <p class="mb-0">Aze4115</p>
                                    </div>
                                </div>
                                <!-- Item -->
                                <div class="cart-product_item my-3 p-2 row position-relative">
                                    <div class="cart-product_item_photo d-flex align-items-center justify-content-center col-md-2 mb-3 mb-md-0 p-0">
                                        <img src="~/Assets/Uploads/Products/prd-4.jpg"
                                             alt=""
                                             class="" />
                                    </div>
                                    <div class="cart-product_item_info col-md-10">
                                        <h3 class="cart-product-title fw-semibold h5">
                                            <a href="" class="link-base text-decoration-none">
                                                Activated Charcoal Teeth Whitening Toothpaste MINT
                                                Flavor
                                            </a>

                                        </h3>
                                        <p class="text-decoration-line-through m-0">$112.2</p>
                                        <p class="my-1 cart-product-price text-base">
                                            $68.5 / 4
                                        </p>
                                        <p class="mb-0">17.05.2022</p>
                                        <p class="mb-0">Azerbaijan , baku</p>
                                        <p class="mb-0">Suraxanı Nizami 12b</p>
                                        <p class="mb-0">Aze4115</p>
                                    </div>
                                </div>
                                <!-- Item -->
                                <div class="cart-product_item my-3 p-2 row position-relative">
                                    <div class="cart-product_item_photo d-flex align-items-center justify-content-center col-md-2 mb-3 mb-md-0 p-0">
                                        <img src="~/Assets/Uploads/Products/prd-4.jpg"
                                             alt=""
                                             class="" />
                                    </div>
                                    <div class="cart-product_item_info col-md-10">
                                        <h3 class="cart-product-title fw-semibold h5">
                                            <a href="" class="link-base text-decoration-none">
                                                Activated Charcoal Teeth Whitening Toothpaste MINT
                                                Flavor
                                            </a>

                                        </h3>
                                        <p class="text-decoration-line-through m-0">$112.2</p>
                                        <p class="my-1 cart-product-price text-base">
                                            $68.5 / 4
                                        </p>
                                        <p class="mb-0">17.05.2022</p>
                                        <p class="mb-0">Azerbaijan , baku</p>
                                        <p class="mb-0">Suraxanı Nizami 12b</p>
                                        <p class="mb-0">Aze4115</p>
                                    </div>
                                </div>
                                <!-- Item -->
                                <div class="cart-product_item my-3 p-2 row position-relative">
                                    <div class="cart-product_item_photo d-flex align-items-center justify-content-center col-md-2 mb-3 mb-md-0 p-0">
                                        <img src="~/Assets/Uploads/Products/prd-4.jpg"
                                             alt=""
                                             class="" />
                                    </div>
                                    <div class="cart-product_item_info col-md-10">
                                        <h3 class="cart-product-title fw-semibold h5">
                                            <a href="" class="link-base text-decoration-none">
                                                Activated Charcoal Teeth Whitening Toothpaste MINT
                                                Flavor
                                            </a>

                                        </h3>
                                        <p class="text-decoration-line-through m-0">$112.2</p>
                                        <p class="my-1 cart-product-price text-base">
                                            $68.5 / 4
                                        </p>
                                        <p class="mb-0">17.05.2022</p>
                                        <p class="mb-0">Azerbaijan , baku</p>
                                        <p class="mb-0">Suraxanı Nizami 12b</p>
                                        <p class="mb-0">Aze4115</p>
                                    </div>
                                </div>



                                <!-- End -->
                            </div>
                        </div>
                    </div>
                    <!-- Medical Examinations tab  -->
                    <div class="tab-pane bg-light p-2 tab-content-exam fade "
                         id="tab-exam"
                         role="tabpanel"
                         aria-labelledby="exam-tab"
                         tabindex="0">
                        <div class="exams-container container scrollable ">
                            <!-- Item -->
                            <div class="border-gray p-3 d-flex justify-content-between align-items-center my-2">
                                <div class=" ">
                                    <h2 class="h5 fw-semibold">General Diagnostic Test </h2>
                                    <p><span class="fw-semibold">Date : </span> 17 Jan 2023 15:00</p>
                                    <p class="fw-semibold"> Status : <span class=" badge bg-warning ">Pending</span></p>
                                </div>
                                <div class="c">
                                    <!-- <a href="" disabled download class="d-block text-center download-btn m-0 p-0 text-decoration-none">
                                        <i class="fa-solid fa-file-arrow-down d-block"></i>
                                        Download
                                    </a> -->
                                </div>


                            </div>

                            <!-- Item -->
                            <div class="border-gray p-3 d-flex justify-content-between align-items-center my-2">
                                <div class=" ">
                                    <h2 class="h6 fw-semibold">General Diagnostic Test </h2>
                                    <p>17 Jan 2023 15:00</p>
                                    <p class="fw-semibold"> Status : <span class=" badge bg-warning ">Pending</span></p>
                                </div>
                                <div class="">
                                    <!-- <a href="" disabled download class="d-block text-center download-btn m-0 p-0 text-decoration-none">
                                        <i class="fa-solid fa-file-arrow-down d-block"></i>
                                        Download
                                    </a> -->
                                </div>


                            </div>
                            <!-- Item -->
                            <div class="border-gray p-3 d-flex justify-content-between align-items-center my-2">
                                <div class=" ">
                                    <h2 class="h6 fw-semibold">General Diagnostic Test </h2>
                                    <p>17 Jan 2023 15:00</p>
                                    <p class="fw-semibold"> Status : <span class=" badge bg-success">Ready</span></p>
                                </div>
                                <div class="">
                                    <a href="" download class="d-block text-center download-btn m-0 p-0 text-decoration-none">
                                        <i class="fa-solid fa-file-arrow-down d-block"></i>
                                        Download
                                    </a>
                                </div>


                            </div>

                            <!-- Item -->
                            <div class="border-gray p-3 d-flex justify-content-between align-items-center my-2">
                                <div class=" ">
                                    <h2 class="h6 fw-semibold">General Diagnostic Test </h2>
                                    <p>17 Jan 2023 15:00</p>
                                    <p class="fw-semibold"> Status : <span class=" badge bg-danger ">Rejected</span></p>
                                </div>
                                <div class="">
                                    <!-- <a href="" disabled download class="d-block text-center download-btn m-0 p-0 text-decoration-none">
                                        <i class="fa-solid fa-file-arrow-down d-block"></i>
                                        Download
                                    </a> -->
                                </div>


                            </div>


                            <!-- END -->
                        </div>
                    </div>


                    @if (User.IsInRole("Doctor"))
                    {
                        <!-- Appointments tab  -->
                        @await Html.PartialAsync("_AppointmentsTabPartial", Model.Doctor.DoctorAppointments.OrderByDescending(x=> x.CreatedAt).Take(30).ToList())
                    }
                    else
                    {
                        <!-- Appointments tab  -->
                        @await Html.PartialAsync("_AppointmentsTabPartial", Model.DoctorAppointments)
                    }
                    <!-- End -->
                </div>
            </div>
        </div>
    </section>
</main>

@section Scripts{
    <!-- ========================= CDNs =============================== -->
    <!-- Bootsrap js -->
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js.map"></script>

    <script>
        connection.on("setAsOnline", userId => {
            console.log(userId);

            $(`.call-${userId}`).removeClass("btn-secondary, disabled");

            $(`.call-${userId}`).addClass("call-btn");
        })

        connection.on("setAsOffline", userId => {
            $(`.call-${userId}`).addClass("btn-secondary, disabled");

            $(`.call-${userId}`).removeClass("call-btn");
        })
    </script>
    <!-- ========================= Custom =============================== -->

    <script src="~/Assets/Js/hidden-file-input.js"></script>
}

